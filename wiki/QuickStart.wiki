#summary How to get started with Oryx Development
#labels Featured,Deprecated

= THIS TUTORIAL IS DEPRECATED. PLEASE USE [http://code.google.com/p/oryx-editor/wiki/SetupDevelopmentEnvironment THIS GUIDE] TO SET UP A DEVELOPMENT ENVIRONMENT FOR ORYX. =

= Introduction =

Oryx Editor is a web application that is designed to run well in Firefox, beginning with version 2.0. Most of the application is written in !JavaScript, the server is written in Java and JRuby. In addition to that, you will need to get familiar with SVG and JSON to design or edit additional stencil sets. To get more information of all technologies used in this project, have a look at [http://www.ohloh.net/projects/oryx-editor the Ohloh project site].

Following the steps in this document will set up a development environment for Oryx on Mircosoft Windows. But most steps are exactly the same on MacOSX and on Linux and all required software is available for all platforms. So, with these instructions you should also be able to set up a development environment on any system. In this environment, you will be able to test changes in Oryx on a local test page. However, the environment does not include the complete server. You will be able to use server-side plugins like PDF export, but e.g. the process repository and the ability to save models are not supported. For some server-side plugins more steps might be necessary before using them. Instructions for deploying the whole project will be available shortly.

== Installing JDK ==

The Java SE Development Kit is required for building the project. You can download it [http://java.sun.com/javase/downloads/index.jsp here].

== Installing a Server ==

Oryx requires a server that supports Java Servlets for server-side plugins like PDF export. You won't need a server, if you don't want to use or develop server-side plugins. We recommend using [http://tomcat.apache.org/ Apache Tomcat]. Download the latest version and follow the installation instructions. On Windows Vista do not use the Windows Service Installer! Just download the zip archive and unpack it in a folder in your user folder.

== Installing Eclipse IDE ==

You will need a !JavaScript development environment to start Oryx Editor development. You may prefer a simple text editor or one that has special support for !JavaScript. However, we recommend you get yourself the [http://www.aptana.com/ Aptana IDE], which has served the original development team well. This instructions will guide you to a working setup as an Eclipse plugin:
  # [http://www.eclipse.org/downloads/ Download] and extract/install Eclipse 3.2. You may prefer the 'Classic' distribution. If you decide to use another distribution, make sure that Ant is included. When using a newer version of Eclipse, check for Aptana IDE compatibility.
  # Start Eclipse.
  # With the help of the integrated Software Update mechanism, install the plugins from the following update site URL: [http://update.aptana.com/update/studio/3.2/ http://update.aptana.com/update/studio/3.2/]. Open the link in your browser to get more information on how to install the Aptana plugin.
  # You will have to restart Eclipse.
  # Unless your Elipse version has integrated support for SVN, install it from the update site URL [http://subclipse.tigris.org/update_1.2.x http://subclipse.tigris.org/update_1.2.x] using the same mechanism.
  # Again, you will have to restart Eclipse.

Make sure that Eclipse uses the previously installed JDK. To check this, do the following:
  # Open _Window_ -> _Preferences..._ .
  # In the tree view on the left open _Java_ -> _Installed JREs_.
  # If the JDK is included in the list of installed JREs, mark it as the default JRE by checking the box in the first column. If the JDK is not included in the list, you have to add it first.
  # Click on _OK_ to apply the changes.

== Installing Firefox ==

Make sure you have an Oryx Editor compatible version of Firefox on your system. If there is none, [http://www.mozilla.com/ download] and install version 2.0.

== Checkout the Project ==

 # Start Eclipse.
 # Open _File_ -> _Import_.
 # Under the node _Other_ choose _Checkout Projects from SVN_.
 # Enter the URL of the trunk. You can find the URL [http://code.google.com/p/oryx-editor/source/checkout here]. The trunk contains an Eclipse project file and will automatically be found. Downloading the trunk may take a while.

== Build the Project ==

For building the project you have to adjust the _build.xml_ file and set up an Ant task.

 # In Eclipse open the file _build.xml_ in the project's root folder.
 # Add the following lines at the end of the file, but before the {{{</project>}}} tag:
{{{
        <target name="copywar" depends="all">
                <delete dir="C:\Programme\Apache Software Foundation\Tomcat 6.0\webapps\oryx"/>
                <copy todir='C:\Programme\Apache Software Foundation\Tomcat 6.0\webapps'>
            <fileset dir='dist' includes='oryx.war'/>
        </copy>
        </target>
        
        <target name="tomcat-start">
            <java jar="C:\Programme\Apache Software Foundation\Tomcat 6.0\bin\bootstrap.jar" fork="true">
                <jvmarg value="-Dcatalina.home=C:\Programme\Apache Software Foundation\Tomcat 6.0"/>
                <jvmarg value="-Xdebug"/>
                <jvmarg value="-Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n"/>
            </java>
        </target>
        
        <target name="tomcat-stop">
            <java jar="C:\Programme\Apache Software Foundation\Tomcat 6.0\bin\bootstrap.jar" fork="true">
                <jvmarg value="-Dcatalina.home=C:\Programme\Apache Software Foundation\Tomcat 6.0"/>
                <arg line="stop"/>
            </java>
        </target>
        
        <target name="deploy" depends="tomcat-stop, copywar, tomcat-start" /> 
}}}
 # Adjust the paths to the Tomcat server, if necessary. This addition will automatically deploy Oryx to the web server in debug mode. Of course, if you use another server than Tomcat, this will not work!
 # Save your changes.
 # In the Eclipse toolbar open _External Tools..._ .
 # Create a new _Ant Build_ and enter a name like "Oryx deploy".
 # On tab _Main_ browse the workspace to add the buildfile (_build.xml_) and the base directory (the project's root directory).
 # On tab _Targets_ check the target _deploy_ and click on _Apply_.
 # Click on _Run_ to build and deploy the project.

If you do not want to use or develop server-side plugins, just select the target _all_ in the Ant build and run the file _./build/editor.xhtml_.

== Run ==

If Oryx is deployed successfully, you can open the example page _editor.xhtml_ that loads Oryx with the BPMN stencil set. In the default configuration of Tomcat, the URL would be [http://localhost:8080/oryx/editor.xhtml http://localhost:8080/oryx/editor.xhtml].

Congratulation! You have now set up your development environment for Oryx.

== Debug ==

For debugging server-side plugins you have to do the following:
  # In Eclipse open _Debug..._ .
  # Add a new _Java Remote Application_ and enter a name like "Oryx debug".
  # On tab _Connect_ set the project to Oryx.
  # Click on _Apply_ and then _Debug_.

Now you should be able to set breakpoints and debug your Java code.